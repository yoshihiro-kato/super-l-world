package com.ykato.slw

import android.graphics.Bitmap
import android.graphics.Color
import android.graphics.Matrix

class NormalBlock {
    private val magnification : Float = 5F
    private val color = arrayOf(
            0x00000000, // 0
            0xff000000, // 1
            0xffffffff, // 2
            0xfffee13d, // 3
            0xffddae50  // 4
    )

    private val position: Array<IntArray> = arrayOf(
            intArrayOf(
                    0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,2,2,2,4,4,4,4,4,4,4,4,4,1,0,
                    1,2,2,3,3,3,3,3,3,3,3,3,4,4,4,1,
                    1,2,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,2,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,2,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,4,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,4,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,4,3,3,3,3,3,3,3,3,3,4,4,4,1,
                    1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,
                    0,1,4,4,4,4,4,4,4,4,4,4,4,4,1,0,
                    0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0
            ),
            intArrayOf(
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    1,1,2,2,2,4,4,4,4,4,4,4,4,4,1,1,
                    1,2,1,1,1,1,1,1,1,1,1,1,1,1,4,1,
                    1,1,3,3,3,3,3,3,3,3,3,3,3,4,1,1,
                    1,4,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,4,3,3,3,1,3,3,3,3,1,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,3,4,4,1,
                    1,4,3,3,3,3,3,3,3,3,3,3,4,4,4,1,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            ),
            intArrayOf(
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,
                    1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            ),
            intArrayOf(
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    1,1,2,2,2,2,2,2,2,2,2,2,3,2,1,1,
                    1,2,2,2,2,2,2,2,2,3,2,3,2,3,3,1,
                    1,2,2,2,2,4,2,2,3,2,4,3,3,3,3,1,
                    1,2,2,2,2,4,2,3,2,3,4,3,3,3,3,1,
                    1,2,3,2,3,2,3,2,3,3,3,3,3,3,3,1,
                    1,1,3,3,3,3,3,3,3,3,3,3,3,3,1,1,
                    1,3,1,1,1,1,1,1,1,1,1,1,1,1,4,1,
                    1,1,3,3,3,3,3,3,3,3,3,4,4,4,1,1,
                    0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            )
        )

    private val width = 16
    private val height = 16

    fun createBlock(index : Int): Bitmap {
        val pixels = Array(width * height) { Color.BLACK }
        for (y in 0..(height - 1)) {
            for (x in 0..(width - 1)) {
                pixels[x + y * width] = color[position[index][x + y * width]].toInt()
            }
        }

        val bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)
        bitmap.setPixels(pixels.toIntArray(), 0, bitmap.width, 0, 0, bitmap.width, bitmap.height)
        val matrix = Matrix()
        matrix.setScale(magnification, magnification)
        return Bitmap.createBitmap(bitmap, 0, 0, bitmap.width, bitmap.height, matrix,true)
    }
}